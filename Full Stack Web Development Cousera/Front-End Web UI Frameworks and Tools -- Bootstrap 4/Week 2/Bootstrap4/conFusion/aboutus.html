<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Ristorante Con Fusion: About Us</title>
    <!-- Required meta tags always come first -->
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <meta http-equiv="x-ua-compatible" content="ie=edge" />

    <!-- Bootstrap CSS -->
    <link
      rel="stylesheet"
      href="node_modules/bootstrap/dist/css/bootstrap.min.css"
    />
    <link
      rel="stylesheet"
      href="node_modules/font-awesome/css/font-awesome.min.css"
    />
    <link
      rel="stylesheet"
      href="node_modules/bootstrap-social/bootstrap-social.css"
    />
    <link rel="stylesheet" href="css/style.css" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script>
      $(document).ready(function() {
        $("#myInput").on("keyup", function() {
          var value = $(this)
            .val()
            .toLowerCase();
          $("#myTable tr").filter(function() {
            $(this).toggle(
              $(this)
                .text()
                .toLowerCase()
                .indexOf(value) > -1
            );
          });
        });
      });
    </script>
  </head>

  <body>
    <header class="jumbotron">
      <div class="container">
        <div class="row row-header">
          <div class="col-12 col-sm-9">
            <h1 class="display-2">Movies Record Saving</h1>
          </div>
          <div class="col-12 col-sm align-self-center">
            <img
              src="/img/logo.png"
              alt="logo"
              class="img-fluid"
              width="100"
              height="100"
            />
          </div>
        </div>
      </div>
    </header>

    <div class="container">
      <div class="row row-content">
        <div>
          <h2>
            Movies Record
          </h2>
          <div class="col-12 col-sm-12">
            <div class="row ">
              <input id="myInput" type="text" placeholder="Search.." />
            </div>
          </div>
          <div class="table-responsive">
            <table id="table" class="table table-striped">
              <thead class="thead-dark">
                <tr>
                  <th>Name</th>
                  <th>Director</th>
                  <th>Year</th>
                  <th>Genre</th>
                  <th>Notes</th>
                </tr>
              </thead>
              <tbody id="myTable">
                <td>Harry Potter</td>
                <td>Herny</td>
                <td>2012</td>
                <td>Animated</td>
                <td>Animated Movie with fun, thrill and romance</td>
              </tbody>
            </table>
          </div>
          <div class="row row-content">
            <div class="col-12">
              <h3>Send us your Feedback</h3>
            </div>
            <div class="col-12 col-md-9">
              <form>
                <div class="form-group row">
                  <label for="name" class="col-md-2 col-form-label">Name</label>
                  <div class="col-md-10">
                    <input
                      type="text"
                      class="form-control"
                      id="name"
                      name="name"
                      placeholder="Enter name of movie."
                    />
                  </div>
                </div>
                <div class="form-group row">
                  <label for="director" class="col-md-2 col-form-label"
                    >Director</label
                  >
                  <div class="col-md-10">
                    <input
                      type="text"
                      class="form-control"
                      id="director"
                      name="director"
                      placeholder="Enter director's name."
                    />
                  </div>
                </div>
                <div class="form-group row">
                  <label for="year" class="col-12 col-md-2 col-form-label"
                    >Year</label
                  >
                  <div class="col-5 col-md-3">
                    <input
                      type="year"
                      class="form-control"
                      id="year"
                      name="year"
                      placeholder="YYYY"
                    />
                  </div>
                </div>
                <div class="form-group row">
                  <label for="genre" class="col-12 col-md-2 col-form-label"
                    >Genre</label
                  >
                  <div class="col-5 col-md-3">
                    <input
                      type="genre"
                      class="form-control"
                      id="genre"
                      name="genre"
                      placeholder="Genre"
                    />
                  </div>
                </div>
                <div class="form-group row">
                  <label for="Notes" class="col-12 col-md-2 col-form-label"
                    >Notes</label
                  >
                  <div class="col-5 col-md-10">
                    <input
                      type="genre"
                      class="form-control"
                      id="notes"
                      name="notes"
                      placeholder="Notes"
                    />
                  </div>
                </div>

                <div class="form-group row">
                  <div class="offset-md-2 col-md-10">
                    <button
                      class="btn btn-primary"
                      onClick="addHtmlTableRow();"
                    >
                      Add
                    </button>
                    <button
                      class="btn btn-primary"
                      onclick="editHtmlTbleSelectedRow();"
                    >
                      Edit
                    </button>
                    <button
                      class="btn btn-primary"
                      onclick="removeSelectedRow();"
                    >
                      Remove
                    </button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </div>

    <script>
      var rIndex,
        table = document.getElementById("table");
      console.log(table);
      // check the empty input
      function checkEmptyInput() {
        var isEmpty = false,
          name = document.getElementById("name").value,
          director = document.getElementById("director").value,
          year = document.getElementById("year").value,
          genre = document.getElementById("genre").value,
          notes = document.getElementById("notes").value;

        if (name === "") {
          alert("Name Connot Be Empty");
          isEmpty = true;
        } else if (director === "") {
          alert("Director Connot Be Empty");
          isEmpty = true;
        } else if (year === "") {
          alert("Year Connot Be Empty");
          isEmpty = true;
        } else if (genre === "") {
          alert("Genre Connot Be Empty");
          isEmpty = true;
        }

        return isEmpty;
      }

      // add Row
      function addHtmlTableRow() {
        // get the table by id
        // create a new row and cells
        // get value from input text
        // set the values into row cell's
        if (!checkEmptyInput()) {
          var newRow = table.insertRow(table.length),
            cell1 = newRow.insertCell(0),
            cell2 = newRow.insertCell(1),
            cell3 = newRow.insertCell(2),
            cell4 = newRow.insertCell(3),
            cell5 = newRow.insertCell(4),
            name = document.getElementById("name").value,
            director = document.getElementById("director").value,
            year = document.getElementById("year").value,
            genre = document.getElementById("genre").value,
            notes = document.getElementById("notes").value;

          cell1.innerHTML = name;
          cell2.innerHTML = director;
          cell3.innerHTML = year;
          cell4.innerHTML = genre;
          cell5.innerHTML = notes;
          // call the function to set the event to the new row
          selectedRowToInput();

          document.getElementById("name").value = "";
          document.getElementById("director").value = "";
          document.getElementById("year").value = "";
          document.getElementById("genre").value = "";
          document.getElementById("notes").value = "";
        }
      }

      // display selected row data into input text
      function selectedRowToInput() {
        for (var i = 1; i < table.rows.length; i++) {
          table.rows[i].onclick = function() {
            // get the seected row index
            rIndex = this.rowIndex;
            document.getElementById("name").value = this.cells[0].innerHTML;
            document.getElementById("director").value = this.cells[1].innerHTML;
            document.getElementById("year").value = this.cells[2].innerHTML;
            document.getElementById("genre").value = this.cells[3].innerHTML;
            document.getElementById("notes").value = this.cells[4].innerHTML;
          };
        }
      }
      selectedRowToInput();

      function editHtmlTbleSelectedRow() {
        var name = document.getElementById("name").value,
          director = document.getElementById("director").value,
          year = document.getElementById("year").value,
          genre = document.getElementById("genre").value,
          notes = document.getElementById("notes").value;

        if (!checkEmptyInput()) {
          table.rows[rIndex].cells[0].innerHTML = name;
          table.rows[rIndex].cells[1].innerHTML = director;
          table.rows[rIndex].cells[2].innerHTML = year;
          table.rows[rIndex].cells[3].innerHTML = genre;
          table.rows[rIndex].cells[4].innerHTML = notes;
        }
      }

      function removeSelectedRow() {
        table.deleteRow(rIndex);
        // clear input text
        document.getElementById("name").value = "";
        document.getElementById("director").value = "";
        document.getElementById("year").value = "";
        document.getElementById("genre").value = "";
        document.getElementById("notes").value = "";
      }
    </script>

    <!-- jQuery first, then Popper.js, then Bootstrap JS. -->
    <script src="node_modules/jquery/dist/jquery.slim.min.js"></script>
    <script src="node_modules/popper.js/dist/umd/popper.min.js"></script>
    <script src="node_modules/bootstrap/dist/js/bootstrap.min.js"></script>
  </body>
</html>
